{"ast":null,"code":"import axios from 'axios';\nexport const SET_SELECTED_FILM = 'SET_SELECTED_FILM';\nexport const setSelectedFilm = film => ({\n  type: SET_SELECTED_FILM,\n  payload: film\n});\nexport const fetchHeroDetails = id => async dispatch => {\n  try {\n    dispatch({\n      type: 'FETCH_HERO_DETAILS_START',\n      payload: id\n    });\n    const heroResponse = await axios.get(`https://swapi.dev/api/people/${id}/`);\n    const heroData = heroResponse.data;\n    const filmsData = await Promise.all(heroData.films.map(async filmUrl => {\n      const filmResponse = await axios.get(filmUrl);\n      return filmResponse.data;\n    }));\n    dispatch({\n      type: 'FETCH_HERO_DETAILS_SUCCESS',\n      payload: {\n        hero: heroData,\n        films: filmsData\n      }\n    });\n  } catch (error) {\n    dispatch({\n      type: 'FETCH_HERO_DETAILS_ERROR',\n      payload: error.message\n    });\n  }\n};\nconst initialState = {\n  hero: null,\n  films: [],\n  loading: false,\n  error: null,\n  selectedFilm: null\n};\nconst heroReducer = (state = initialState, action) => {\n  switch (action.type) {\n    case 'FETCH_HERO_DETAILS_START':\n      return {\n        ...state,\n        loading: true,\n        error: null\n      };\n    case 'FETCH_HERO_DETAILS_SUCCESS':\n      return {\n        ...state,\n        loading: false,\n        hero: action.payload.hero,\n        films: action.payload.films\n      };\n    case 'FETCH_HERO_DETAILS_ERROR':\n      return {\n        ...state,\n        loading: false,\n        error: action.payload\n      };\n    case SET_SELECTED_FILM:\n      return {\n        ...state,\n        selectedFilm: action.payload\n      };\n    default:\n      return state;\n  }\n};\nexport default heroReducer;","map":{"version":3,"names":["axios","SET_SELECTED_FILM","setSelectedFilm","film","type","payload","fetchHeroDetails","id","dispatch","heroResponse","get","heroData","data","filmsData","Promise","all","films","map","filmUrl","filmResponse","hero","error","message","initialState","loading","selectedFilm","heroReducer","state","action"],"sources":["/Users/a1/react/swapiRedux/src/store/heroReducer.js"],"sourcesContent":["import axios from 'axios';\n\nexport const SET_SELECTED_FILM = 'SET_SELECTED_FILM';\n\nexport const setSelectedFilm = (film) => ({\n  type: SET_SELECTED_FILM,\n  payload: film,\n});\n\nexport const fetchHeroDetails = (id) => async (dispatch) => {\n  try {\n    dispatch({ type: 'FETCH_HERO_DETAILS_START', payload: id });\n\n    const heroResponse = await axios.get(`https://swapi.dev/api/people/${id}/`);\n    const heroData = heroResponse.data;\n\n    const filmsData = await Promise.all(\n      heroData.films.map(async (filmUrl) => {\n        const filmResponse = await axios.get(filmUrl);\n        return filmResponse.data;\n      })\n    );\n\n    dispatch({ type: 'FETCH_HERO_DETAILS_SUCCESS', payload: { hero: heroData, films: filmsData } });\n  } catch (error) {\n    dispatch({ type: 'FETCH_HERO_DETAILS_ERROR', payload: error.message });\n  }\n};\n\nconst initialState = {\n  hero: null,\n  films: [],\n  loading: false,\n  error: null,\n  selectedFilm: null,\n};\n\nconst heroReducer = (state = initialState, action) => {\n  switch (action.type) {\n    case 'FETCH_HERO_DETAILS_START':\n      return {\n        ...state,\n        loading: true,\n        error: null,\n      };\n\n    case 'FETCH_HERO_DETAILS_SUCCESS':\n      return {\n        ...state,\n        loading: false,\n        hero: action.payload.hero,\n        films: action.payload.films,\n      };\n\n    case 'FETCH_HERO_DETAILS_ERROR':\n      return {\n        ...state,\n        loading: false,\n        error: action.payload,\n      };\n\n    case SET_SELECTED_FILM:\n      return {\n        ...state,\n        selectedFilm: action.payload,\n      };\n\n    default:\n      return state;\n  }\n};\n\nexport default heroReducer;\n"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AAEzB,OAAO,MAAMC,iBAAiB,GAAG,mBAAmB;AAEpD,OAAO,MAAMC,eAAe,GAAIC,IAAI,KAAM;EACxCC,IAAI,EAAEH,iBAAiB;EACvBI,OAAO,EAAEF;AACX,CAAC,CAAC;AAEF,OAAO,MAAMG,gBAAgB,GAAIC,EAAE,IAAK,MAAOC,QAAQ,IAAK;EAC1D,IAAI;IACFA,QAAQ,CAAC;MAAEJ,IAAI,EAAE,0BAA0B;MAAEC,OAAO,EAAEE;IAAG,CAAC,CAAC;IAE3D,MAAME,YAAY,GAAG,MAAMT,KAAK,CAACU,GAAG,CAAE,gCAA+BH,EAAG,GAAE,CAAC;IAC3E,MAAMI,QAAQ,GAAGF,YAAY,CAACG,IAAI;IAElC,MAAMC,SAAS,GAAG,MAAMC,OAAO,CAACC,GAAG,CACjCJ,QAAQ,CAACK,KAAK,CAACC,GAAG,CAAC,MAAOC,OAAO,IAAK;MACpC,MAAMC,YAAY,GAAG,MAAMnB,KAAK,CAACU,GAAG,CAACQ,OAAO,CAAC;MAC7C,OAAOC,YAAY,CAACP,IAAI;IAC1B,CAAC,CACH,CAAC;IAEDJ,QAAQ,CAAC;MAAEJ,IAAI,EAAE,4BAA4B;MAAEC,OAAO,EAAE;QAAEe,IAAI,EAAET,QAAQ;QAAEK,KAAK,EAAEH;MAAU;IAAE,CAAC,CAAC;EACjG,CAAC,CAAC,OAAOQ,KAAK,EAAE;IACdb,QAAQ,CAAC;MAAEJ,IAAI,EAAE,0BAA0B;MAAEC,OAAO,EAAEgB,KAAK,CAACC;IAAQ,CAAC,CAAC;EACxE;AACF,CAAC;AAED,MAAMC,YAAY,GAAG;EACnBH,IAAI,EAAE,IAAI;EACVJ,KAAK,EAAE,EAAE;EACTQ,OAAO,EAAE,KAAK;EACdH,KAAK,EAAE,IAAI;EACXI,YAAY,EAAE;AAChB,CAAC;AAED,MAAMC,WAAW,GAAGA,CAACC,KAAK,GAAGJ,YAAY,EAAEK,MAAM,KAAK;EACpD,QAAQA,MAAM,CAACxB,IAAI;IACjB,KAAK,0BAA0B;MAC7B,OAAO;QACL,GAAGuB,KAAK;QACRH,OAAO,EAAE,IAAI;QACbH,KAAK,EAAE;MACT,CAAC;IAEH,KAAK,4BAA4B;MAC/B,OAAO;QACL,GAAGM,KAAK;QACRH,OAAO,EAAE,KAAK;QACdJ,IAAI,EAAEQ,MAAM,CAACvB,OAAO,CAACe,IAAI;QACzBJ,KAAK,EAAEY,MAAM,CAACvB,OAAO,CAACW;MACxB,CAAC;IAEH,KAAK,0BAA0B;MAC7B,OAAO;QACL,GAAGW,KAAK;QACRH,OAAO,EAAE,KAAK;QACdH,KAAK,EAAEO,MAAM,CAACvB;MAChB,CAAC;IAEH,KAAKJ,iBAAiB;MACpB,OAAO;QACL,GAAG0B,KAAK;QACRF,YAAY,EAAEG,MAAM,CAACvB;MACvB,CAAC;IAEH;MACE,OAAOsB,KAAK;EAChB;AACF,CAAC;AAED,eAAeD,WAAW"},"metadata":{},"sourceType":"module","externalDependencies":[]}